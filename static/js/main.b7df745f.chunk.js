(this.webpackJsonpmesto=this.webpackJsonpmesto||[]).push([[0],{16:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(1),s=a.n(c),o=a(6),r=a.n(o),i=(a(16),a(10)),u=a(9),l=a(2),p=a.p+"static/media/logo.fad4f8a5.svg";var d=function(){return Object(n.jsx)("header",{className:"header root__section",children:Object(n.jsx)("img",{src:p,alt:"mesto logo",className:"logo"})})},j=s.a.createContext();var _=function(e){var t=s.a.useContext(j);return Object(n.jsx)("div",{className:"profile root__section",children:Object(n.jsxs)("div",{className:"user-info",children:[Object(n.jsx)("div",{className:"user-info__photo",style:{backgroundImage:"url(".concat(t.avatar,")")}}),Object(n.jsxs)("div",{className:"user-info__data",children:[Object(n.jsx)("h1",{className:"user-info__name",children:t.name}),Object(n.jsx)("p",{className:"user-info__job",children:t.about})]}),Object(n.jsx)("button",{onClick:e.onAddPlace,className:"button user-info__button",children:"+"}),Object(n.jsx)("button",{onClick:e.onEditProfile,className:"button edit-info__button",children:"Edit"})]})})},b=a.p+"static/media/close.8a65f75d.svg";var m=function(e){var t=s.a.useContext(j),a=s.a.useState(),c=Object(l.a)(a,2),o=c[0],r=c[1],i=s.a.useState(),u=Object(l.a)(i,2),p=u[0],d=u[1],_=s.a.useState(!0),m=Object(l.a)(_,2),f=m[0],h=m[1],O=s.a.useState(!0),v=Object(l.a)(O,2),x=v[0],g=v[1],N=s.a.useState(!0),C=Object(l.a)(N,2),k=C[0],S=C[1];return s.a.useEffect((function(){h(!(!x||!k))}),[o,p]),s.a.useEffect((function(){r(t.name),d(t.about)}),[t]),Object(n.jsx)("div",{className:"popup popup_".concat(e.name," ").concat(e.isOpen),children:Object(n.jsxs)("div",{className:"popup__content",children:[Object(n.jsx)("img",{onClick:function(a){r(t.name),d(t.about),e.on\u0421losePopup(a),h(!0),g(!0),S(!0)},src:b,alt:"\u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430",className:"popup__close popup__close__".concat(e.name)}),Object(n.jsx)("h3",{className:"popup__title",children:e.title}),Object(n.jsxs)("form",{onSubmit:e.onSubmit,className:"popup__form",name:e.name,children:[Object(n.jsx)("input",{type:"text",name:"name",className:"popup__input popup__input_type_name",placeholder:"\u0418\u043c\u044f",value:o,onChange:function(e){r(e.target.value),0!==e.target.value&&""!==e.target.value.replace(/\s/g,"")?g(!0):g(!1)}}),Object(n.jsx)("span",{id:"name-error",className:"popup__error",children:x?"":"\u042d\u0442\u043e \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"}),Object(n.jsx)("input",{type:"text",name:"job",className:"popup__input popup__input_type_link-url",placeholder:"\u041e \u0441\u0435\u0431\u0435",value:p,onChange:function(e){d(e.target.value),0!==e.target.value&&""!==e.target.value.replace(/\s/g,"")?S(!0):S(!1)}}),Object(n.jsx)("span",{id:"job-error",className:"popup__error",children:k?"":"\u042d\u0442\u043e \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"}),Object(n.jsx)("button",{className:f?"button popup__button save__button button_active":"button popup__button save__button",disadisabled:f?"\u043e\u043a":void 0,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})})};var f=function(e){var t=s.a.useState(),a=Object(l.a)(t,2),c=a[0],o=a[1],r=s.a.useState(),i=Object(l.a)(r,2),u=i[0],p=i[1],d=s.a.useState(!1),j=Object(l.a)(d,2),_=j[0],m=j[1],f=s.a.useState(!1),h=Object(l.a)(f,2),O=h[0],v=h[1],x=s.a.useState(!1),g=Object(l.a)(x,2),N=g[0],C=g[1];return s.a.useEffect((function(){m(!(!O||!N))}),[u,c]),Object(n.jsx)("div",{className:"popup popup_".concat(e.name," ").concat(e.isOpen),children:Object(n.jsxs)("div",{className:"popup__content",children:[Object(n.jsx)("img",{onClick:e.on\u0421losePopup,src:b,alt:"\u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430",className:"popup__close popup__close__".concat(e.name)}),Object(n.jsx)("h3",{className:"popup__title",children:e.title}),Object(n.jsxs)("form",{onSubmit:function(t){e.AddPlace(t),o(""),p("")},className:"popup__form",name:e.name,children:[Object(n.jsx)("input",{type:"text",name:"name",className:"popup__input popup__input_type_name",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",value:c,onChange:function(e){o(e.target.value),0!==e.target.value&&""!==e.target.value.replace(/\s/g,"")?v(!0):v(!1)}}),Object(n.jsx)("span",{id:"name-error",className:"popup__error",children:O?"":"\u042d\u0442\u043e \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"}),Object(n.jsx)("input",{type:"text",name:"link",className:"popup__input popup__input_type_link-url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",value:u,onChange:function(e){p(e.target.value),0!==e.target.value&&""!==e.target.value.replace(/\s/g,"")?C(!0):C(!1)}}),Object(n.jsx)("span",{id:"job-error",className:"popup__error",children:N?"":"\u042d\u0442\u043e \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"}),Object(n.jsx)("button",{type:"submit",className:_?"button popup__button button_active":"button popup__button",disadisabled:_?"\u043e\u043a":void 0,children:"+"})]})]})})};var h=function(e){var t=e.card;return e.onClose,Object(n.jsx)("div",{className:"popup popup_".concat(e.name," ").concat(e.isOpen),children:Object(n.jsxs)("div",{className:"popup__picture",children:[Object(n.jsx)("img",{onClick:e.on\u0421losePopup,src:b,alt:"\u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430",className:"popup__close popup__close_picture"}),Object(n.jsx)("img",{className:"popup__image",alt:"\u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430",id:"big_picture",src:t})]})})};var O=function(e){var t=e.link,a=e.name,c=e.onCardClick,o=e.onCardDelete,r=e.id,i=s.a.useState(!1),u=Object(l.a)(i,2),p=u[0],d=u[1];return Object(n.jsxs)("div",{className:"place-card",children:[Object(n.jsx)("div",{onClick:function(e){"place-card__image"===e.target.className&&c(t)},className:"place-card__image",style:{backgroundImage:"url(".concat(t,")")},children:Object(n.jsx)("button",{onClick:function(){o(r)},className:"place-card__delete-icon"})}),Object(n.jsxs)("div",{className:"place-card__description",children:[Object(n.jsx)("h3",{className:"place-card__name",children:a}),Object(n.jsx)("button",{onClick:function(){d(!p)},className:p?"place-card__like-icon place-card__like-icon_liked":"place-card__like-icon"})]})]})},v=a(7),x=a(8),g="https://nomoreparties.co",N=new(function(){function e(t){Object(v.a)(this,e),this.urlUser=t.urlUser,this.urlCards=t.urlCards,this.headers=t.headers}return Object(x.a)(e,[{key:"getUserInfo",value:function(){return fetch(this.urlUser,{headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")})).catch((function(e){return console.log(e)}))}},{key:"updateUserInfo",value:function(e,t){return fetch(this.urlUser,{method:"PATCH",headers:this.headers,body:JSON.stringify({name:e,about:t})}).then((function(e){return e.ok?e.json():Promise.reject("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")})).catch((function(e){return console.log(e)}))}},{key:"getCards",value:function(){return fetch(this.urlCards,{headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")})).catch((function(e){return console.log(e)}))}}]),e}())({urlUser:"".concat(g,"/cohort11/users/me"),urlCards:"".concat(g,"/cohort11/cards"),headers:{authorization:"19913bd6-c98f-45a1-ae54-95f6284f3235","Content-Type":"application/json"}});var C=function(){var e=s.a.useState(!1),t=Object(l.a)(e,2),a=t[0],c=t[1],o=s.a.useState(!1),r=Object(l.a)(o,2),p=r[0],b=r[1],v=s.a.useState(!1),x=Object(l.a)(v,2),g=x[0],C=x[1],k=s.a.useState([]),S=Object(l.a)(k,2),P=S[0],y=S[1],E=s.a.useState(),U=Object(l.a)(E,2),I=U[0],A=U[1],D=s.a.useState({id:3940932284}),w=Object(l.a)(D,2),F=w[0],T=w[1];function J(){c(!a)}function B(){b(!p)}function L(){C(!g)}function M(e){L(),A(e)}function z(e){var t=P.filter((function(t){return t._id!==e}));y(t)}return s.a.useEffect((function(){N.getCards().then((function(e){y(e.slice(0,10))}))}),[]),s.a.useEffect((function(){N.getUserInfo().then((function(e){T(Object(i.a)({},e))}))}),[]),Object(n.jsx)("div",{className:"root",children:Object(n.jsxs)(j.Provider,{value:F,children:[Object(n.jsx)(d,{}),Object(n.jsx)(_,{onEditProfile:J,onAddPlace:B}),Object(n.jsx)("div",{className:"places-list root__section",children:P.map((function(e){var t=e.link,a=e.name,c=e._id;return Object(n.jsx)(O,{link:t,name:a,id:c,onCardClick:M,onCardDelete:z},c)}))}),Object(n.jsx)(f,{name:"new",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",AddPlace:function(e){e.preventDefault();var t={name:e.target.elements.name.value,link:e.target.elements.link.value,_id:10*Math.random()};y([].concat(Object(u.a)(P),[t])),B()},"on\u0421losePopup":B,isOpen:p?"popup_is-opened":""}),Object(n.jsx)(m,{name:"edit",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c","on\u0421losePopup":J,isOpen:a?"popup_is-opened":"",onSubmit:function(e){e.preventDefault();var t=e.target.elements.name.value,a=e.target.elements.job.value;N.updateUserInfo(t,a),F.name=t,F.about=a,J()}}),Object(n.jsx)(h,{name:"picture",card:I,"on\u0421losePopup":L,isOpen:g?"popup_is-opened":""})]})})},k=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,18)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,o=t.getTTFB;a(e),n(e),c(e),s(e),o(e)}))};r.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(C,{})}),document.getElementById("root")),k()}},[[17,1,2]]]);
//# sourceMappingURL=main.b7df745f.chunk.js.map